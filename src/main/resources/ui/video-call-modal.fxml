<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>

<StackPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
           fx:controller="org.example.peer_chat.ui.controllers.VideoCallModalController"
           stylesheets="@../css/video-call-modal.css"
           styleClass="call-root">

    <!-- Full-screen gradient background -->
    <BorderPane styleClass="call-background">

        <!-- Center content: avatar, name, timer, call type -->
        <center>
            <VBox alignment="CENTER" spacing="16">
                <!-- Avatar of the contact -->
                <Label fx:id="contactAvatar" text="ðŸ°" styleClass="call-avatar" />

                <!-- Contact Name -->
                <Label fx:id="contactName" text="Nguyá»…n VÄƒn A" styleClass="call-name" />

                <!-- Call duration -->
                <HBox alignment="CENTER">
                    <Label fx:id="callDurationWrapper" text="">
                        <graphic>
                            <Label>
                                <graphic>
                                    <Text fx:id="callDuration" text="00:00" styleClass="call-duration-text" />
                                </graphic>
                            </Label>
                        </graphic>
                    </Label>
                </HBox>

                <!-- Call Type (voice or video) -->
                <HBox alignment="CENTER">
                    <Label fx:id="callTypePill" styleClass="call-type-pill">
                        <graphic>
                            <Text fx:id="callTypeLabel" text="Cuá»™c gá»i thoáº¡i ðŸŽ¤" />
                        </graphic>
                    </Label>
                </HBox>
            </VBox>
        </center>

        <!-- Local video preview at top-right -->
        <top>
            <HBox alignment="TOP_RIGHT" BorderPane.alignment="TOP_RIGHT">
                <padding>
                    <Insets top="20" right="20" bottom="0" left="0" />
                </padding>
                <StackPane fx:id="localVideoContainer" styleClass="local-video-container">
                    <ImageView fx:id="localVideoFeed" fitWidth="220" fitHeight="150" />
                    <Label text="Camera cá»§a báº¡n ðŸ“·" styleClass="local-video-label" />
                </StackPane>
            </HBox>
        </top>

        <!-- Bottom controls -->
        <bottom>
            <HBox alignment="CENTER" spacing="18" styleClass="call-controls">
                <padding>
                    <Insets top="0" right="0" bottom="32" left="0" />
                </padding>

                <!-- Accept / Reject buttons for incoming calls -->
                <Button fx:id="acceptButton" text="Cháº¥p nháº­n" onAction="#onAcceptCall" styleClass="call-btn call-btn-accept" visible="false" />
                <Button fx:id="rejectButton" text="Há»§y" onAction="#onRejectCall" styleClass="call-btn call-btn-reject" visible="false" />

                <!-- In-call controls (shown during an active call) -->
                <Button fx:id="muteButton" text="ðŸ”ˆ" onAction="#onToggleMute" styleClass="call-btn call-btn-mute" />
                <Button fx:id="videoButton" text="ðŸ“¹" onAction="#onToggleVideo" styleClass="call-btn call-btn-video" />
                <Button fx:id="shareScreenButton" text="ðŸ–¥" onAction="#onToggleScreenSharing" styleClass="call-btn call-btn-screen" />
                <Button fx:id="endCallButton" text="âœ–" onAction="#onEndCall" styleClass="call-btn call-btn-end" />
            </HBox>
        </bottom>

    </BorderPane>
</StackPane>
