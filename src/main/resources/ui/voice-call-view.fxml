<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>

<StackPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
    fx:controller="org.example.peer_chat.ui.controllers.VoiceCallController"
    stylesheets="@../css/video-call-modal.css"
    styleClass="call-root"
    prefWidth="450" prefHeight="500">

    <BorderPane styleClass="call-background" mouseTransparent="true" />

    <!-- Full-screen gradient background -->
    <BorderPane styleClass="call-background">

        <!-- Center content: avatar, name, timer, call type -->
        <center>
            <VBox fx:id="callContainer" alignment="CENTER" spacing="20">
                <Label fx:id="contactAvatar" text="ðŸŽ§" styleClass="call-avatar" />
                <Label fx:id="contactName" text="Nguyá»…n VÄƒn A" styleClass="call-name" />

                <HBox alignment="CENTER">
                    <Label fx:id="callDurationWrapper" text="">
                        <graphic>
                            <Label>
                                <graphic>
                                    <Text fx:id="callDuration" text="00:00"
                                        styleClass="call-duration-text" />
                                </graphic>
                            </Label>
                        </graphic>
                    </Label>
                </HBox>

                <HBox alignment="CENTER">
                    <Label fx:id="callTypePill" styleClass="call-type-pill">
                        <graphic>
                            <Text fx:id="callTypeLabel" text="Cuá»™c gá»i thoáº¡i ðŸŽ¤" />
                        </graphic>
                    </Label>
                </HBox>
            </VBox>
        </center>

        <!-- Bottom controls -->
        <bottom>
            <VBox alignment="CENTER" spacing="20">
                <padding>
                    <Insets top="20" right="0" bottom="40" left="0" />
                </padding>

                <HBox alignment="CENTER" spacing="24" styleClass="call-controls">
                    <!-- Accept / Reject buttons for incoming calls (hidden by default) -->
                    <Button fx:id="acceptCallButton" text="âœ“ Cháº¥p nháº­n" onAction="#onAccept"
                        styleClass="call-btn call-btn-accept" visible="false" />
                    <Button fx:id="rejectCallButton" text="âœ• Tá»« chá»‘i" onAction="#rejectIncomingCall"
                        styleClass="call-btn call-btn-reject" visible="false" />

                    <!-- In-call controls (shown khi Ä‘ang trong cuá»™c gá»i) -->
                    <Button fx:id="muteButton" text="ðŸ”Š" onAction="#toggleMute"
                        styleClass="call-btn call-btn-mute" />
                    <Button fx:id="endCallButton" onAction="#endCall" text="ðŸ“µ"
                        styleClass="call-btn call-btn-end" />
                </HBox>
            </VBox>
        </bottom>

    </BorderPane>
</StackPane>