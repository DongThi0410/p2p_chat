<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.Rectangle?>

<StackPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
    fx:controller="org.example.peer_chat.ui.controllers.VoiceRecorderController"
    stylesheets="@../css/voice-recorder.css"
    styleClass="backdrop-root">

    <!-- Card trung tâm -->
    <VBox fx:id="voiceRecorderModal"
        alignment="CENTER"
        spacing="24"
        styleClass="recorder-card">

        <!-- Hàng trên: nút đóng ở bên phải -->
        <HBox alignment="TOP_RIGHT" prefWidth="360">
            <Pane HBox.hgrow="ALWAYS" />
            <Button fx:id="cancelButton"
                text="✕"
                onAction="#onClose"
                styleClass="icon-close-button" />
        </HBox>

        <!-- Tiêu đề -->
        <Text fx:id="recordingStatus"
            text="Nhấn để ghi âm"
            styleClass="recorder-title" />

        <TextArea fx:id="messageReviewArea" editable="false" wrapText="true"/>


        <!-- Mic + halo + thời gian -->
        <VBox alignment="CENTER" spacing="16">
            <StackPane alignment="CENTER">
                <!-- Halo mờ phía sau mic -->
                <Circle fx:id="micHalo" radius="70" styleClass="mic-halo" />
                <!-- Mic chính -->
                <Circle fx:id="micCircle" radius="52" styleClass="mic-circle" />
                <ImageView fx:id="micIcon" fitHeight="40" fitWidth="40">
                    <image>
                        <Image url="@../images/mic_white.png" />
                    </image>
                </ImageView>
            </StackPane>

            <!-- Thời gian ghi âm -->
            <Text fx:id="durationText" text="00:00" styleClass="duration-text" />
        </VBox>

        <!-- Waveform placeholder -->
        <HBox alignment="CENTER" spacing="4" prefHeight="40">
            <Rectangle fx:id="bar1" width="3" height="12" styleClass="wave-bar" />
            <Rectangle fx:id="bar2" width="3" height="20" styleClass="wave-bar" />
            <Rectangle fx:id="bar3" width="3" height="32" styleClass="wave-bar" />
            <Rectangle fx:id="bar4" width="3" height="18" styleClass="wave-bar" />
            <Rectangle fx:id="bar5" width="3" height="26" styleClass="wave-bar" />
            <Rectangle fx:id="bar6" width="3" height="16" styleClass="wave-bar" />
            <Rectangle fx:id="bar7" width="3" height="30" styleClass="wave-bar" />
            <Rectangle fx:id="bar8" width="3" height="22" styleClass="wave-bar" />
            <Rectangle fx:id="bar9" width="3" height="14" styleClass="wave-bar" />
            <Rectangle fx:id="bar10" width="3" height="24" styleClass="wave-bar" />
        </HBox>

        <!-- Nhóm nút hành động -->
        <HBox alignment="CENTER" spacing="16">
            <Button fx:id="transformToTextButton"
                text="Chuyển sang văn bản"
                onAction="#transformToText"
                styleClass="secondary-button" />
            <Button fx:id="sendTransformedButton"
                    text="Gửi bản văn bản"
                    onAction="#sendTransformedTextMessage"
                    styleClass="secondary-button" />
            <Button fx:id="sendButton"
                text="Gửi bản ghi âm"
                onAction="#onSendRecording"
                styleClass="primary-button" />
        </HBox>

    </VBox>

</StackPane>